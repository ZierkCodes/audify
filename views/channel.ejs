<%- include('./partials/head.ejs') %>
<body>
    <%- include('./partials/header.ejs') %>
    <section class="chatroom_container">
        <div id="channel" data-channel="<%= channel %>" hidden></div>
        <h3 class="channel_name">#<%= channel %> - Most Popular</h3>
        <div id="chatroom">
            <% chats.forEach(c => { %>
                <div class="message_output">
                    <div class="avatar">
                        <img id="avatarPhoto" height="30" src="<%= c.avatar %>" alt="">
                    </div>
                    <div class="content">
                        <p class="username"><%= c.username %> <small><%=` ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.createdAt.getMonth()]} ${c.createdAt.getDate()}, ${c.createdAt.getFullYear()} ${c.createdAt.toLocaleTimeString([], {hour: 'numeric', minute:'2-digit'})} `%></small></p>
                        <p class="text"><%= c.message %></p>
                    </div>
                </div>
            <% }) %>
        </div>
        <% // Notice the <ul> here that we'll be appending chatroom users to! %>
        <!-- <ul id="chatters"></ul> -->
            <div class="message_input">
                <p id="isTyping"></p>
                <input type="text" id="avatar" hidden name="avatar" value="<%= user.profile.avatar %>">
                <input type="text" hidden name="username" value="<%= profile.username %>" id="username">
                <input type="text" id="message">
                <a class="btn btn-info" href="#" id="send_message"></a>
            </div>
    </section>

    <% // We need to bring in a JavaScript file for this!!! %>
    <script defer src="/js/channel.js"></script>


</body>
</html>